/*
 * ULP_strip_effects.c
 *
 *  Created on: Jun 30, 2024
 *      Author: micha
 */

#include "ULP_strip_effects.h"

// strip counter which points to number diode, max 21
uint8_t strip_startup_counter = 0;

void strip_startup_init()
{
	strip_startup_counter = 0;
}

// run and write effect to colour array and return 0 when startup end
uint8_t run_strip_startup_effect(uint8_t colour_array[][3], uint8_t strip_length)
{

	// first diode
	if (strip_startup_counter < strip_length)
	{
		// blue
		colour_array[strip_startup_counter][0] = 29;
		colour_array[strip_startup_counter][1] = 71;
		colour_array[strip_startup_counter][2] = 196;

		//red
		colour_array[strip_length - strip_startup_counter - 1][0] = 196;
		colour_array[strip_length - strip_startup_counter - 1][1] = 29;
		colour_array[strip_length - strip_startup_counter - 1][2] = 91;
		}
	}

	// second diode
	if (strip_startup_counter - 1 >= 0 && strip_startup_counter - 1 < strip_length)
	{
		// blue
		colour_array[strip_startup_counter - 1][0] = 14;
		colour_array[strip_startup_counter - 1][1] = 35;
		colour_array[strip_startup_counter - 1][2] = 98;

		//red
		colour_array[strip_length - strip_startup_counter][0] = 98;
		colour_array[strip_length - strip_startup_counter][1] = 14;
		colour_array[strip_length - strip_startup_counter][2] = 45;
	}

	// third diode
	if (strip_startup_counter - 2 >= 0 && strip_startup_counter - 2 < strip_length)
	{
		// blue
		colour_array[strip_startup_counter - 2][0] = 7;
		colour_array[strip_startup_counter - 2][1] = 18;
		colour_array[strip_startup_counter - 2][2] = 49;

		//red
		colour_array[strip_length - strip_startup_counter + 1][0] = 49;
		colour_array[strip_length - strip_startup_counter + 1][1] = 7;
		colour_array[strip_length - strip_startup_counter + 1][2] = 23;
	}

	// fourth diode
	if (strip_startup_counter - 3 >= 0 && strip_startup_counter - 3 < strip_length)
	{
		// blue
		colour_array[strip_startup_counter - 3][0] = 0;
		colour_array[strip_startup_counter - 3][1] = 0;
		colour_array[strip_startup_counter - 3][2] = 0;

		//red
		colour_array[strip_length - strip_startup_counter + 2][0] = 0;
		colour_array[strip_length - strip_startup_counter + 2][1] = 0;
		colour_array[strip_length - strip_startup_counter + 2][2] = 0;
	}

	strip_startup_counter += 1;

	// end
	if (strip_startup_counter - 3 == 22)
		return 0;

	return 1;
}
